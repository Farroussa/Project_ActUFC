<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Act'UFC - Blog</title>
    <link rel= "stylesheet" href="../CSS/style.css">
    <script src="../JS/opti.js" async></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <header>
        <div class ="container">
            <div class ="logoheader">
                <a href="Accueil.html"><img src="../IMG/Logo2.png" alt="logo"></a>
            </div>
            <div class="menuheader" onclick="accueil()">
                <img src="../IMG/menu.png" alt="menu" id="menuheader">
            </div>
            <nav>
                <ul>
                    <li class="titre"><button class="accueil" onclick="accueil()">Act'UFC</button></li>
                    <li class="rien">rien</li>
                    <li class="rien">rien</li>
                    <li class="rien">rien</li>
                    <li class="liens" id="lien1"><a href="/HTML/Accueil.html">Home</a></li>
                    <li class="liens" id="lien2"><a href="/HTML/News.html">News</a></li>
                    <li class="liens" id="lien3"><a href="/HTML/Ranking.html">Ranking</a></li>
                    <li class="liens" id="lien4"><a href="/HTML/YourArticle.html">Blog</a></li>
                    <li class="liens" id="lien5"><a href="/HTML/Quizz.html">Quizz</a></li>
                    <li class="liens" id="lien6"><a href="/HTML/About.html">About</a></li>
                    <li class="liens" id="lien7"><a href="/HTML/Suggestions.html">Suggestions</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <div class="container">
        <main class="form-container">
            <!--<h1>Write your own article and see it appear</h1>
            <form id = "Form" action="YourArticle.html" method="get">
                <label for="Title">Title :</label><br>
                <textarea id="Title" name="Title" rows="4" cols="50"></textarea><br><br>
                <label for="Content">Content :</label><br>
                <textarea id="Content" name="Content" rows="4" cols="50"></textarea><br><br>
                <input type="submit" value="Send" class="lebouton">
            </form>
            <article>
                <h3 id="displayTitle"></h3>
                <div class="blog">
                    <p id="displayContent"></p>
                    <script>
                        window.addEventListener("DOMContentLoaded", function() {
                            const params = new URLSearchParams(window.location.search);
                            const Title = params.get("Title");
                            if (Title) {
                                document.getElementById("displayTitle").innerHTML = Title;
                            }

                            const params2 = new URLSearchParams(window.location.search);
                            const Content = params2.get("Content");
                            if (Content) {
                                document.getElementById("displayContent").innerHTML = Content;

                            }
                        });

                    </script>
                </div>
            </article>-->

            <h1>Send messages and give your opinion to the MMA community</h1>

            <!--<input type="text" id="message" placeholder="Enter your message">
            <button onclick="sendMessage()">Send</button>
            <div id="messages"></div>
            <script>
                // Tableau pour stocker les messages
                const messages = [];

                // Fonction pour ajouter un message à la liste et l'afficher
                function addMessage(message) {
                    messages.push(message);
                    const messageDiv = document.createElement("div");
                    messageDiv.textContent = message;
                    messageDiv.classList.add('boxe');
                    document.getElementById("messages").appendChild(messageDiv);
                }

                // Fonction pour envoyer un message
                function sendMessage() {
                    const messageInput = document.getElementById("message");
                    const messageText = messageInput.value;
                    if (messageText) {
                        addMessage(messageText);
                        messageInput.value = "";
                    }
                }

                // Écoute de la touche "Entrée" pour envoyer un message
                document.getElementById("message").addEventListener("keyup", function(event) {
                    if (event.key === "Enter") {
                        sendMessage();
                    }
                });
            </script>-->
            <div id="messageContainer">
                <!-- Zone où les messages seront affichés -->
            </div>
            <input type="text" id="commenterNickname" placeholder="Enter your nickname">
            <input type="text" id="commentText" placeholder="Enter your comment">
            <button id="addComment" onclick=addCommentToBlog()>Add Comment</button>


            <script>
                // api 2 this allows us to send a message o n the blog
                const msgInput = document.getElementById('messageInput');
                msgInput.style.display = "none";
                const usernameInput = document.getElementById('username');
                usernameInput.style.display = "none";
                const sendmsg = document.getElementById('sendmsg');
                const send = document.getElementById('send');
                send.style.display = "none";

                function apparaitremsg(){
                    usernameInput.style.display = "";
                    msgInput.style.display = "";
                    sendmsg.style.display = "none";
                    send.style.display = "";
                }

                function addCommentToBlog() {
                    const commenterNicknameInput = document.getElementById('commenterNickname');
                    const commentTextInput = document.getElementById('commentText');

                    const commenterNickname = commenterNicknameInput.value;
                    const commentText = commentTextInput.value;

                    if (!commenterNickname || !commentText) {
                        alert('Please fill in both fields.');
                        return;
                    }

                    const commentData = {
                        Nickname: commenterNickname,
                        BlogComment: commentText,
                    };

                    // Send the comment data to your backend
                    fetch('/addCommentBlog', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(commentData),
                    })
                        .then((response) => {
                            if (response.status === 201) {
                                alert('Comment added successfully');
                                commenterNicknameInput.value = '';
                                commentTextInput.value = '';
                            } else {
                                alert('Failed to add the comment');
                            }
                        })
                        .catch((error) => {
                            console.error(error);
                        });
                }


                function sendToDatabase() {
                    sendmsg.style.display = "none";
                    msgInput.style.display = "none";
                    send.style.display = "none";
                    usernameInput.style.display = "none";
                    sendmsg.style.display = "";

                    const commenterNickname = document.getElementById('username').value;
                    const commentText = document.getElementById('messageInput').value;
                    const commentDate = new Date().toISOString();

                    const data = {
                        CommenterNickname: commenterNickname,
                        CommentDate: commentDate,
                        CommentText: commentText
                    };

                    if (commentText !== "" && commenterNickname !== "") {
                        // Call the addCommentBlog function from controller.js
                        addCommentBlog(data); // Pass the data as an argument
                    }
                }
            
                
                /*function envoyerMessage() {
                    sendmsg.style.display="none";
                    var messageInput = document.getElementById("messageInput");
                    var messageText = messageInput.value.trim();
                    msgInput.style.display = "none";
                    send.style.display = "none";
                    sendmsg.style.display = "";
                    if (messageText !== "") {
                        var messageContainer = document.getElementById("messageContainer");
                        var messageDiv = document.createElement("div");
                        messageDiv.className = "box";
                        messageDiv.innerText = messageText;

                        // Insère le nouveau message au début de la liste des messages
                        messageContainer.insertBefore(messageDiv, messageContainer.firstChild);

                        // Efface le champ de texte après avoir envoyé le message
                        messageInput.value = "";
                    }
                }*/

            </script>
        </main>
    </div>


    <footer>
        <div class="container">
            <div class ="logofooter">
                <a href="Accueil.html"><img src="../IMG/Logo3.png" alt="logo"></a>
            </div>
            <div class="footer-links">
                <ul>
                    <li><a href="About.html">About</a></li>
                </ul>
                <p>© 2023 Act'UFC</p>
            </div>
        </div>
    </footer>
</body>
</html>